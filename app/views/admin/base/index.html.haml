= link_to "New #{controller.controller_name.titleize.singularize}", url_for(:controller => controller.controller_name, :action => 'new')

- if collection.any?
  %table{:width => "100%"}
    %thead
      %tr
        %th{:colspan => 2} Actions
        - collection.first.class.fields.each do |mongo_field|
          - field = mongo_field.first
          - next if ['_type', '_id', 'id', 'created_at', 'updated_at'].include?(field)
          %th= field.titleize
    %tbody
      - collection.each do |r|
        %tr{:class => "#{cycle('','alt ')}"}
          %td= link_to "Delete", resource_url(r), :confirm => 'Are you sure?', :method => :delete
          %td= link_to "Edit", edit_resource_url(r)
          - r.class.fields.each do |mongo_field|
            - field = mongo_field.first
            - next if ['_type', '_id', 'id', 'created_at', 'updated_at'].include?(field)
            %td= r.send(field)
  